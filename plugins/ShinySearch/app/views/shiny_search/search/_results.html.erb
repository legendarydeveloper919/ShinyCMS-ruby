<%# frozen_string_literal: true %>

<% @page_title = t( 'shiny_search.search.results.title', query: @query ) %>

<section>
  <header>
    <h2>
      <%= @page_title %>
    </h2>
  </header>
  <ul>
  <% @results.each do |result| %>
    <% plugin_name = result.class.name.split('::').first %>
    <li>
      <% if ::Plugin.loaded? plugin_name %>
      <%= render partial: "#{plugin_name.underscore}/search/result/#{result.class.name.underscore}", locals: { result: result } %>
      <% else %>
      <%= render partial: "search/result/#{result.class.name.underscore}", locals: { result: result } %>
      <% end %>
    </li>
  <% end %>
  </ul>
  <% if @results.blank? %>
    <%= render partial: 'search/no_results' %>
  <% else %>
    <% if @pageable %>
    <%= render partial: 'includes/pager', locals: { paged: @pageable } %>
    <% end %>
  <% end %>
</section>

<%= render partial: 'search/algolia_logo' if @search_backend == :algolia && display_algolia_logo? %>
