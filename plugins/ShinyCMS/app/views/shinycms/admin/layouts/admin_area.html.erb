<!DOCTYPE html>
<!-- CoreUI - Free Bootstrap Admin Template
     @version v3.0.0
     @link https://coreui.io
     Copyright (c) 2019 creativeLabs Łukasz Holeczek
     Licensed under MIT (https://coreui.io/license)
-->
<%# Adapted for use in the ShinyCMS admin area by Denny de la Haye.
    Please raise any issues with ShinyCMS first, even if they look
    like CoreUI bugs; they're more likely to be integration issues.
    https://github.com/denny/ShinyCMS-ruby / https://shinycms.org
-%>
<html lang="<%= I18n.locale.to_s %>">
  <head>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag   %>

    <% page_title = @page_title || t( "#{current_plugin_name.underscore}.admin.#{controller_name}.#{action_name}.title" ) %>

    <%= component 'admin/head/blazer', root_path: main_app.root_path if current_plugin_name == 'Blazer' %>

    <%= component 'admin/head', page_title: page_title, with_html_editor: try( :with_html_editor? ) %>
  </head>

  <body class="c-app">
    <div id="sidebar" class="c-sidebar c-sidebar-dark c-sidebar-fixed c-sidebar-lg-show">
      <%= component 'admin/sidebar', current_user: current_user %>
    </div>

    <div class="c-wrapper">
      <header class="c-header c-header-light c-header-fixed">
        <%= render partial: 'admin/includes/header',
                   locals: { page_title: page_title, plugin_name: current_plugin_name } %>
      </header>

      <div class="c-body">
        <main>
          <%= component 'admin/alerts', flash: flash.to_h %>
          <%= yield %>
        </main>
      </div>

      <footer class="c-footer">
        <div class="ml-auto">
          Powered by <a href="https://shinycms.org/">ShinyCMS</a>
          (<a href="https://github.com/denny/ShinyCMS-ruby/releases/tag/v<%= ShinyCMS::VERSION %>"><%= ShinyCMS::VERSION %></a>)
        </div>
      </footer>
    </div>

    <%= render partial: 'admin/includes/footer_javascript' %>
  </body>
</html>
